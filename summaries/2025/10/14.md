# Activity Summary for 10/14/2025

## 11:14:50 AM
The log details changes across two primary files: `src\constants.js` and `src\components\Brand\ShareofVoice\ShareofVoice.jsx`, along with `src\components\Brand\ShareofVoice\PieChartSection.jsx`.

**File-Specific Updates:**

1.  **`c:\Users\91965\Desktop\ScribeIntern\SKRIBE NEW FRONT_END\skribefrontend\src\constants.js`**
    *   **Timestamp Range:** Changes recorded between 10/14/2025, 10:16:39 AM and 10/14/2025, 10:34:16 AM.
    *   **Content:** This file consistently defines a large set of API endpoints for various functionalities (authentication, user preferences, CRM, campaigns, reports, social media integrations, brand tracking) using template literals with a base `Url_V1` and other environment variables. There are no content differences across the multiple entries in the log for this file, suggesting the entries might be capturing saves without actual code modifications, or changes were reverted.
    *   **Key APIs defined include:** Login, Signup, Password Reset, User Info, OTP generation, Refresh Token, Career openings, Beatwatch articles, CRM operations, User preferences (geo, media type, beats, competitors, topics, brands, spokespersons), Outlet by media type, Campaign list management (create, get, delete, send mail), Email quota, Journalist portfolio, various reporting APIs (Brand, Influencer, Spokesperson, Topic), Search functionalities, Podcast, Contact form, Dashboard analytics (Usage Statistics, Trending Journalists, Skribe365, Favourites, BeatWatch), Instagram and Twitter integrations, Geo statistics, Brand Dashboard metrics (Language, Sentiment, Share of Voice, City-wise count, Top Journalist, Articles), and Brand/Competitor tracking (add, deactivate).

2.  **`c:\Users\91965\Desktop\ScribeIntern\SKRIBE NEW FRONT_END\skribefrontend\src\components\Brand\ShareofVoice\ShareofVoice.jsx`**
    *   **Timestamp Range:** Active development occurred between 10/14/2025, 10:37:06 AM and 10/14/2025, 11:04:36 AM.
    *   **Content Changes:**
        *   **Initial state (10:37:06 AM):** The component sets up state variables for `timePeriod`, `startDate`, `endDate`, `dateStatus`, `topJournalistsData`, `topCompetitorJournalistsData`, `selectedCompetitors`, `shareOfVoiceData`, `competitors`, `selectedMediaTypes`, and `selectedMediaTypes2`. It initializes the date range to "Last 1 month" and fetches `GET_SHARE_OF_VOICE`, `GET_TOP_JOURNALISTS`, and `GET_TOP_COMETITOR_JOURNALIST` data via `useEffect` hooks. Date range calculation and input handling are implemented.
        *   **Incremental addition of `getShareOfVoiceMention` (10:38:54 AM - 10:41:19 AM):** An empty async function `getShareOfVoiceMention` was initially added, then gradually filled with a `try...catch` block, a `userService.post` call using `GET_SHARE_OF_VOICE_MENTION`, and a `payload` object including `media: selectedMediaTypes2`.
        *   **State management for `shareOfVoiceMention` (10:43:10 AM - 10:44:00 AM):** A new state variable `shareOfVoiceMention` was introduced. The `getShareOfVoiceMention` function was updated to store the fetched data (`res?.data || []`) into this state upon a successful API response (`res?.response?.status === "Ok"`).
        *   **API call trigger (10:44:16 AM):** The `getShareOfVoiceMention()` call was added to the `useEffect` hook that already handles fetching top journalists, ensuring it triggers when `startDate`, `endDate`, `selectedCompetitors`, or `selectedMediaTypes2` change.
        *   **Prop pass to child component (11:04:36 AM):** The newly managed `shareOfVoiceMention` state was passed as a prop to the `PieChartSection` component.

3.  **`c:\Users\91965\Desktop\ScribeIntern\SKRIBE NEW FRONT_END\skribefrontend\src\components\Brand\ShareofVoice\PieChartSection.jsx`**
    *   **Timestamp Range:** Active development occurred between 10/14/2025, 11:12:14 AM and 10/14/2025, 11:14:01 AM.
    *   **Content Changes:**
        *   **Initial Static Chart (11:12:14 AM):** The component rendered a single pie chart using static data for series and labels. It received `shareOfVoiceMention` as a prop but didn't utilize it in the chart data.
        *   **Dynamic Charting and Refactoring (11:13:10 AM):** The component was significantly refactored. The old code was commented out (and later removed). The new implementation introduced three distinct pie chart configurations: `realDataConfig` for "Share of Voice by Mentions", `reachDataConfig` for "Share of Voice by Reach", and `averageDataConfig`. Crucially, the "Share of Voice by Mentions" chart (`realDataConfig`) was updated to dynamically use the `shareOfVoiceMention` prop for its `series` (using `item.count`) and `labels` (using `item.brand_name`). It also added a tooltip formatter to display percentages. The other two charts (`reachDataConfig`, `averageDataConfig`) continued to use dummy data. The component now maps over these configurations to render three separate pie charts.
        *   **Code Cleanup (11:14:01 AM):** The previously commented-out code was removed, making the file cleaner without functional changes.

**Patterns and Recurring Elements:**

*   **API-driven Frontend:** The application heavily relies on fetching data from a backend API, with numerous endpoints defined in `constants.js` and consumed by components like `ShareofVoice.jsx`.
*   **Modular Component Design:** Logic is separated into reusable components (e.g., `ShareofVoice.jsx` orchestrates data fetching and passes it to `PieChartSection.jsx` for rendering).
*   **State Management:** React's `useState` and `useEffect` hooks are extensively used for managing component state, especially for asynchronous data fetching and UI interactions like date range selection and filter application.
*   **Environment Variables:** Base URLs for API calls are configured via `process.env` variables, indicating a robust deployment strategy.
*   **Date Range Filtering:** A common pattern of filtering data by date range (Last 24 hours, 1 week, 1 month, etc., and custom ranges) is implemented, including validation for start/end dates.
*   **Multi-Select Filtering:** The use of `MultiSelectDropdown` for `mediaTypeOptions` and `selectedCompetitors` indicates support for multiple selections in data filtering.
*   **Dashboard Development:** The changes are clearly part of developing or enhancing a "Brand Dashboard," focusing on analytics like "Share of Voice" and "Top Journalists."

## 12:15:00 PM
The provided log details changes across three React components within a "Share of Voice" feature, all occurring on October 14, 2025.

**File: `c:\Users\91965\Desktop\ScribeIntern\SKRIBE NEW FRONT_END\skribefrontend\src\components\Brand\ShareofVoice\ShareofVoice.jsx`**
- **10/14/2025, 11:17:29 AM**: The component initializes as a comprehensive dashboard for "Share of Voice." It integrates multiple sub-components (`BrandHeader`, `MonthShareOfVoice`, `PieChartSection`, `TopJournalists`, `DropdownComponent`, `MultiSelectDropdown`) and manages complex state for time periods, start/end dates, selected competitors, media types, and various data sets (top journalists, share of voice mentions, overall share of voice data). It includes logic to calculate date ranges and fetch data based on these filters.
- **10/14/2025, 11:40:47 AM - 11:49:37 AM**: A series of changes focused on the `h1` title of the "Brand Dashboard". Initially, an empty placeholder `{}` was introduced at 11:40:47 AM, then reverted to "Brand Dashboard" at 11:47:52 AM. Subsequently, the `useLocalStorage` hook was imported at 11:48:34 AM and then used to dynamically display a `brandName` retrieved from local storage, with "Brand Dashboard" as a fallback, finalized by 11:49:12 AM.

**File: `c:\Users\91965\Desktop\ScribeIntern\SKRIBE NEW FRONT_END\skribefrontend\src\components\Brand\ShareofVoice\PieChartSection.jsx`**
- **10/14/2025, 11:21:51 AM**: The component is introduced, rendering three pie charts ("Share of Voice by Mentions," "Share of Voice by Reach," "Average Share of Voice") using `react-apexcharts`. It supports dynamic loading and features `noData` configurations and tooltip formatting for the "Mentions" chart, which uses actual data, while the other two use dummy data.
- **10/14/2025, 11:24:19 AM**: A debugging `console.log` statement was removed.
- **10/14/2025, 11:37:25 AM - 11:40:07 AM**: A sequence of minor, iterative adjustments to the visual presentation of the pie charts. This involved modifying the `dataLabels.offset` property (e.g., from `-15` to `-10`) and `dataLabels.style.fontSize` (e.g., from `"12px"` to `"10px"`) for various chart configurations to refine label positioning and size. A redundant `dataLabels` offset configuration was also removed from `reachDataConfig` at 11:39:32 AM.

**File: `c:\Users\91965\Desktop\ScribeIntern\SKRIBE NEW FRONT_END\skribefrontend\src\components\Brand\ShareofVoice\TopJournalists.jsx`**
- **10/14/2025, 11:28:14 AM**: This component is initially created to display lists of "Top Journalists" for both the brand and its competitors. It enables users to select journalists, add them to a CRM (with quantity limits and account limits), or create a media list using a `BuildCampaign` popup. A nested `JournalistTable` component handles rendering the journalist data, including a placeholder image.
- **10/14/2025, 11:31:04 AM - 11:36:12 AM**: A series of updates address the handling of the journalist profile image.
    - At 11:31:04 AM, the image `src` was changed to an empty string, potentially causing broken image icons.
    - A faulty import for a `noUser` asset was attempted at 11:32:32 AM.
    - This import was corrected to a proper relative path at 11:34:05 AM, and the image `src` was updated to use this imported asset.
    - The import was temporarily commented out and the `src` reverted at 11:35:44 AM, then re-implemented correctly by 11:36:12 AM to use `noUser.src` for the image source.

**Key Patterns and Recurring Elements:**
- **Component-Based Architecture**: All changes occur within React functional components, utilizing `useState` for state management and `useEffect` for side effects like data fetching.
- **Data Fetching and API Interaction**: Components frequently make `POST` requests via `userService.post` to specific backend endpoints (e.g., `GET_SHARE_OF_VOICE`, `GET_TOP_JOURNALISTS`, `PRECRM_POSTDATA`). Error handling with `try-catch` blocks and `console.error` is consistent.
- **User Interface Interactivity**: Components incorporate interactive elements such as dropdowns, multi-selects, date inputs, checkboxes, and buttons.
- **User Feedback**: The `useNotification` hook is widely used to provide feedback to the user, particularly for warnings and success messages.
- **Date Range Filtering**: The `ShareofVoice` component specifically implements logic for calculating and managing date ranges, supporting various predefined periods and custom selections.
- **Styling**: Tailwind CSS classes are extensively used across components for layout and visual presentation.
- **Data Visualization**: The `PieChartSection` demonstrates a focus on data visualization, using a dynamic import for `react-apexcharts` to render interactive charts.
- **Refinement and Bug Fixing**: Several changes, particularly in `PieChartSection.jsx` and `TopJournalists.jsx`, show iterative refinement of UI details (chart label positioning, image display) and correction of asset linking issues.
- **Local Storage Integration**: The `ShareofVoice` component integrates `useLocalStorage` to persist and retrieve UI-related information like the brand name.

## 1:14:32 PM
**File: `c:\Users\91965\Desktop\ScribeIntern\SKRIBE NEW FRONT_END\skribefrontend\src\components\Brand\ShareofVoice\TopJournalists.jsx`**

This file, responsible for displaying top journalists for a brand and its competition, underwent several focused updates on October 14, 2025.

*   **10/14/2025, 1:06:14 PM:**
    *   The `baseURL` import statement was refactored, moving from a relative path (`../../constants`) to an alias-based path (`@/constants`), standardizing the import location.
    *   The `JournalistTable` component introduced dynamic profile picture loading. The `src` attribute of the `img` tag was changed from a static `noUser.src` to a conditional expression: `vchPhotoPath ? baseURL + vchPhotoPath : noUser.src`. This change aimed to display actual journalist photos, with `noUser.src` as a fallback. It appears `vchPhotoPath` was initially assumed to be available directly or implicitly.

*   **10/14/2025, 1:13:23 PM:**
    *   A correction was made to the dynamic image loading logic. The `vchPhotoPath` variable was correctly scoped by accessing it as a property of the `item` object within the `journalists.map` function (`item?.vchPhotoPath`). This ensured that the image path was retrieved directly from the journalist's data object.

*   **10/14/2025, 1:14:10 PM:**
    *   The property name used for the journalist's image path was updated. The code now looks for `item?.journalistImage` instead of `item?.vchPhotoPath` when constructing the dynamic image URL. This indicates a change in the data structure provided for journalist information.

**Key Patterns and Recurring Elements:**

*   All changes are concentrated on a single file within a very short timeframe (less than 10 minutes), indicating rapid iterative development or bug fixing.
*   The core theme of these changes revolves around enhancing the display of journalist profile pictures in the `JournalistTable` component, moving from a static placeholder to a dynamic, data-driven image source. This involved refining the source URL construction and adjusting to evolving data property names (`vchPhotoPath` to `journalistImage`).
*   There's also a minor refactoring for import path consistency.

## 2:14:40 PM
**File**: `c:\Users\91965\Desktop\ScribeIntern\SKRIBE NEW FRONT_END\skribefrontend\src\components\Brand\ShareofVoice\TopJournalists.jsx`
**Timestamp**: 10/14/2025, 1:14:51 PM

This file defines two React components: `TopJournalists` and `JournalistTable`.

The `TopJournalists` component is responsible for displaying lists of journalists relevant to a brand and its competitors, allowing users to select them for CRM integration or campaign list creation.
*   **State Management**: It uses `useState` to manage `selectedJournalistsId` (for IDs), `selectedJournalists` (for full journalist objects), and `isOpen` (to control a campaign build popup).
*   **Journalist Selection**: The `handleSelect` function toggles the selection status of a journalist, updating both ID and object lists.
*   **CRM Integration**: The `addToCRM` function handles adding selected journalists to a CRM system. It includes validation checks (e.g., maximum of 5 journalists per batch), retrieves user ID from `localStorage`, makes an API call via `userService.post` to `PRECRM_POSTDATA`, and provides feedback via `showNotification` for success, warnings (e.g., CRM limit reached), or errors. Selected journalists are cleared after the operation.
*   **Campaign List Creation**: The `buildCampPopup` function shows a warning if no journalists are selected, otherwise it opens a `BuildCampaign` modal and applies an `overflow-hidden` class to `document.body` to prevent scrolling.
*   **UI Structure**: It's rendered in a two-column layout (for larger screens) displaying "Top Journalists (Brand)" and "Top Journalists (Competition)". The "Competition" section includes "Add To CRM" and "Create List" buttons. The `JournalistTable` component is used to render the actual journalist lists. A `BuildCampaign` component is conditionally rendered when `isOpen` is true.

The `JournalistTable` component, a sub-component, displays a sortable table of journalists.
*   **Conditional Rendering**: It shows "No Records Found" if the `journalists` prop is empty.
*   **Table Content**: Each row displays a checkbox for selection, a journalist's profile image (with a fallback to `noUser.src` and error handling for image loading), their formatted name (capitalized first letters of each word), and their mention count. Journalist images are constructed using `baseURL`.
*   **Styling**: The table header is sticky (`sticky top-0 z-50`) for improved scrollability.

**Patterns/Recurring Elements**:
*   Frequent use of `showNotification` for various user feedback messages (warnings, success).
*   Interaction with `localStorage` for `userInfo`.
*   API calls through `userService.post`.
*   Consistent use of `document.body.classList.add/remove("overflow-hidden")` when modals are opened/closed.
*   Styling heavily relies on Tailwind CSS classes for layout, responsiveness, and visual presentation (e.g., `rounded-lg`, `shadow`, `grid`, `flex`, `text-sm`, `bg-[#F7F7F7]`).
*   Common pattern of displaying journalist names and counts, with a selection mechanism.