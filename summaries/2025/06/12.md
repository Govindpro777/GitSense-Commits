# Activity Summary for 6/12/2025

## 9:29:11 AM
The log shows multiple revisions of the `AddJournalist.tsx` file, all on June 11th, 2025.  The code is a React component for adding journalist information.  There are no substantive changes between the various commits, only minor variations likely due to auto-formatting or very small edits not impacting the core functionality.

The component uses several React libraries (`react-router-dom`, `react-redux`, `react-select`, `formik`, `sweetalert2`), indicating a reliance on routing, state management, form handling, and alert displays.

The code heavily interacts with a `userService` for fetching and posting data, suggesting communication with a backend API.  The API endpoints used include `/userpreference/geoStateCity`, `/GetCitiesByStateIds`, `/outlet`, `/supplements`, `/shows`, `/outletsupplements`, `/outletshows`, and `/subBeat`. These endpoints are likely used to populate select options and handle form submissions.

The component includes a modal (`ModalComponent`) and dynamically renders components (`Supplement`, `Title`, `Shows`) based on user interaction, indicating a sophisticated user interface for managing journalist details.  The data is managed using several `useState` hooks, suggesting a component that handles a significant amount of data and state.

The `validationSchema` uses `Yup` to validate the journalist's name, ensuring it doesn't start with certain titles or contain abbreviations, and enforcing proper casing.  This indicates a focus on data integrity.  The numerous API calls suggest a complex process for data management.  The repeated code structure across commits implies iterative development and refinements, with the core functionality remaining unchanged.


## 11:29:09 AM
The primary change on June 12th, 2025, at 11:25:03 AM,  involved the `api.ts` file within the `Skribe-Backend` project. This file defines an Axios instance for making API calls.  The key update focuses on enhanced error handling and token refresh mechanisms.

Specifically, the `api.ts` file now includes:

* **Multiple base URLs:**  The code shows commented-out base URLs (`localhost`, `beta.goskribe.com`, `www.goskribe.com`), suggesting ongoing development or testing across different environments.  The currently active base URL appears to be dynamically determined using `getBaseURL()`.

* **Improved token management:** The code implements a robust mechanism for handling 401 (Unauthorized) errors.  If an access token expires, it attempts to refresh the token using a `/Authenticate/refresh-token` endpoint. If the refresh fails, the user is redirected to the login page (`/`). The implementation uses `isRefreshing` and `refreshAccessTokenPromise` to prevent race conditions during token refresh attempts.


* **Network error handling:** The code now includes a more user-friendly alert for network errors, utilizing a component called `Alert`.

* **Header management:**  The axios instance sets headers including "Content-Type" (initially set to `application/json` with commented-out `multipart/form-data` suggesting potential future support for file uploads) and "X-Source-App".

In essence, this commit significantly improved the resilience and security of API interactions by implementing automatic token refresh and more informative error handling.


## 1:10:01 PM
The log shows updates to two React components on June 12th, 2025.

`GenerateReport.tsx` (12:50:41 PM): This component was significantly updated.  The changes center around generating and sending PDF reports.  The component now fetches data from multiple API endpoints using `userService.get` for various report sections (monthly report details, search graphs, campaign graphs, user performance, top campaigns, and month comparisons). It uses `html2canvas` and `jsPDF` to convert sections of the React component into a PDF.  Significant functionality was added to handle sending the generated PDF via email to multiple clients using `userService.postFormData`.  Error handling and loading states are included. The component also uses SweetAlert2 for user interactions (confirmations and report summary displays).  The code uses Promises and `setTimeout` to ensure data fetching and rendering are complete before proceeding with PDF generation and sending.


`SearchesChart.tsx` (12:52:40 PM): This component renders three different charts (bar charts for media type and beat counts, and a donut chart for city counts) using `react-apexcharts`.  The component takes `data` as a prop and uses `useEffect` to process this data into chart-ready formats for `react-apexcharts`. Each chart has specific styling and formatting applied. The code handles cases where `data` might be undefined.  The charts are presented within a styled section with a class name `pdf-section`, suggesting integration with the PDF generation in `GenerateReport.tsx`.
