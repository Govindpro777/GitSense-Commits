# Activity Summary for 2/5/2026

## 1:32:47 PM
The log details configuration and setup for a Sales ERP backend system, with all recorded changes occurring on **February 3, 2026**.

**File-specific Updates:**

*   **`c:\Users\91965\Desktop\WEB\SALES_ERP\swagger.js` (Timestamp: 2/3/2026, 11:40:20 AM)**
    *   This file configures `swagger-autogen` to automatically generate API documentation for the SalesERP system.
    *   It defines the API title as 'SalesERP API' and description as 'Sales ERP Management System API'.
    *   The API host is set to `localhost:5000` using `http` scheme, with a commented-out option for `erp-sales-backend.onrender.com` and `https`.
    *   The generated output will be saved to `./swagger-output.json`, and it will scan `./server.js` to discover API endpoints.

*   **`c:\Users\91965\Desktop\WEB\SALES_ERP\server.js` (Timestamp: 2/3/2026, 12:51:45 PM)**
    *   This is the main Express server configuration file, responsible for setting up the backend application.
    *   It imports and uses a wide array of middleware for security, logging, and functionality, including `dotenv`, `express`, `http`, `cors`, `helmet`, `morgan`, `express-rate-limit`, and `swagger-ui-express`.
    *   A database connection (`connectDB`) is established, and Socket.IO is initialized (`initSocket`).
    *   API documentation generated by Swagger is served at `/api-docs` using `swagger-ui-express`.
    *   **Security measures** are robust, employing `helmet` for various HTTP headers, `cors` with a detailed list of allowed origins (including `localhost`, Vercel deployments, and `erp-sales-backend.onrender.com`), and `express-rate-limit` for `/api/` endpoints (max 100 requests per 15 minutes).
    *   **Routes**: A comprehensive set of API routes are defined, covering various modules of an ERP system such as authentication (`/api/auth`), admin, chart of accounts, account groups, bank accounts, items, sales, purchases, expenses, receipts, payments, contra entries, journal vouchers, and reports.
    *   It handles body parsing for JSON and URL-encoded data, and serves static files from an `/uploads` directory.
    *   Basic health check endpoint at `/` and robust **error handling** are implemented for 404 routes, `ValidationError`, `CastError`, and duplicate key (`11000`) errors from the database. Error messages are environment-dependent for production.
    *   The server listens on `process.env.PORT` or default `5000`. Socket.IO confirms connection and emits a 'test-event'.

**Patterns and Recurring Elements:**

*   **ERP System Focus**: The codebase is clearly designed for a Sales ERP system, evidenced by the numerous routes related to financial transactions, inventory, and user management (sales, purchases, accounts, items, admin).
*   **API-Centric Architecture**: A consistent pattern of `/api/` prefixes for all core application routes, indicating a well-structured RESTful API.
*   **Security Best Practices**: Repeated use of `helmet`, `cors` with explicit origin control, and `express-rate-limit` demonstrates a strong emphasis on securing the API.
*   **Modular Design**: The `server.js` file imports many dedicated route files and utility modules (like `socket.js`, `database.js`), suggesting a modular and maintainable architecture.
*   **Swagger Integration**: Both files are integral to providing API documentation, with `swagger.js` generating the docs and `server.js` serving them.
*   **Environment Variable Usage**: Extensive use of `process.env` for configuration (e.g., `FRONTEND_URL`, `NODE_ENV`, `PORT`), promoting flexibility and environment-specific settings.
*   **MongoDB Error Handling**: Specific error handling for MongoDB/Mongoose-related errors (`ValidationError`, `CastError`, `11000` for duplicate keys) indicates an underlying MongoDB database.

## 1:59:38 PM
The changes primarily focus on refactoring React components to use `useAppDispatch` and `useAppSelector` hooks from `@/app/hooks` instead of `useDispatch` and `useSelector` from `react-redux` or just `useSelector`. This indicates a migration towards a more standardized and potentially type-safe way of interacting with Redux Toolkit within the application.

### File-Specific Updates:

*   **`c:\Users\91965\Desktop\MikeLegal\iris-new\src\Pages\Login.tsx` (2/5/2026, 12:03:13 PM - 12:04:24 PM)**:
    *   **Initial state**: Uses `useDispatch` and `useSelector`.
    *   **Change**: The `dispatch` hook was updated from `useDispatch()` to `useAppDispatch()`. The `useSelector` hook was also updated to `useAppSelector()`. These changes are consistent across three commits within a minute. The logic of the component remains the same, focusing on user login, navigation to the dashboard upon successful login or existing token, and form submission.

*   **`c:\Users\91965\Desktop\MikeLegal\iris-new\src\Pages\Autoaddtrademark\Autoaddtrademark.tsx` (2/5/2026, 12:05:18 PM - 12:37:06 PM)**:
    *   **Initial state**: Uses `useDispatch` and `useSelector`.
    *   **Change**: Similar to `Login.tsx`, the `dispatch` hook was updated to `useAppDispatch()`, and `useSelector` was updated to `useAppSelector()` in three subsequent commits. The component handles auto-adding trademarks, including managing attorney and proprietor data, trademark classes, and form submission for "AUTO\_ADD\_TRADEMARK" operations. The core functionality, state management, and styled components remain unchanged.

*   **`c:\Users\91965\Desktop\MikeLegal\iris-new\src\Pages\ClientEmailsUpload\ClientEmailUpload.tsx` (2/5/2026, 12:06:07 PM - 12:06:24 PM)**:
    *   **Initial state**: Uses `useDispatch` and `useSelector`.
    *   **Change**: The `dispatch` and `useSelector` hooks were replaced with `useAppDispatch()` and `useAppSelector()` across three commits. This component manages client email uploads, allowing users to select a product (e.g., TM\_WATCH, TM\_MANAGER, PATENT\_MANAGER), subscription type, and upload an Excel file. It also displays upload status and errors.

*   **`c:\Users\91965\Desktop\MikeLegal\iris-new\src\Pages\CustomEmails\CustomEmails.tsx` (2/5/2026, 12:06:41 PM - 12:06:56 PM)**:
    *   **Initial state**: Uses `useDispatch` and `useASelector` (likely a typo, intended `useSelector`).
    *   **Change**: The `dispatch` hook was changed to `useAppDispatch()`, and `useASelector` was corrected to `useAppSelector()` in three commits. This component manages custom email settings, displaying a table of email profiles, hosts (Gmail, Outlook, Office 365), creation/modification dates, and actions like enabling/disabling, editing, and deleting settings. It also includes modals for creating new custom email settings.

*   **`c:\Users\91965\Desktop\MikeLegal\iris-new\src\Pages\Dashboard\Dashboard.tsx` (2/5/2026, 12:07:08 PM - 12:09:06 PM)**:
    *   **Initial state**: Uses `useDispatch` and `useSelector`.
    *   **Change**: The `dispatch` and `useSelector` hooks were systematically updated to `useAppDispatch()` and `useAppSelector()` over four commits. The Dashboard component displays monitoring and finished tasks in a tabbed interface, fetching data for both categories.

*   **`c:\Users\91965\Desktop\MikeLegal\iris-new\src\Pages\Hearing\Modals\AddRowsForm.tsx` (2/5/2026, 12:09:15 PM - 12:09:33 PM)**:
    *   **Initial state**: Uses `useDispatch` and `useSelector`.
    *   **Change**: Both `useDispatch` and `useSelector` were replaced with their `useApp` counterparts in two commits. This modal component allows users to add rows to a table, including serial numbers, opposition numbers, application numbers, hearing dates, officers, and times, with validation and saving functionality.

*   **`c:\Users\91965\Desktop\MikeLegal\iris-new\src\Pages\Hearing\Modals\CsvUpload.tsx` (2/5/2026, 12:09:46 PM - 12:10:03 PM)**:
    *   **Initial state**: Uses `useDispatch` and `useSelector`.
    *   **Change**: `useDispatch` and `useSelector` were updated to `useAppDispatch()` and `useAppSelector()`. This modal component handles CSV file uploads for hearings, displaying upload progress, success messages, or errors.

*   **`c:\Users\91965\Desktop\MikeLegal\iris-new\src\Pages\Hearing\Modals\SearchTM.tsx` (2/5/2026, 12:10:10 PM - 12:10:26 PM)**:
    *   **Initial state**: Uses `useDispatch` and `useSelector`.
    *   **Change**: `useDispatch` and `useSelector` were consistently updated to `useAppDispatch()` and `useAppSelector()` across three commits. This modal allows searching for trademarks using opposition or application numbers and displays detailed information including proprietors and documents.

*   **`c:\Users\91965\Desktop\MikeLegal\iris-new\src\Pages\ImageText\UploadImageText.tsx` (2/5/2026, 12:11:04 PM - 12:12:09 PM)**:
    *   **Initial state**: Uses `useDispatch` and `useSelector`.
    *   **Change**: `useDispatch` and `useSelector` were updated to `useAppDispatch()` and `useAppSelector()` in three commits. This component facilitates uploading image label data (CSV files) to profiles or journals, with options for selecting product types and displaying upload status.

*   **`c:\Users\91965\Desktop\MikeLegal\iris-new\src\Pages\ImageTextNew\UploadImageTextNew.tsx` (2/5/2026, 12:12:34 PM - 12:12:47 PM)**:
    *   **Initial state**: Uses `useDispatch` and `useSelector`.
    *   **Change**: `useDispatch` and `useSelector` were updated to `useAppDispatch()` and `useAppSelector()` in two commits. This component handles uploading image text data to profiles, supporting both CSV file uploads and direct text input for application numbers.

*   **`c:\Users\91965\Desktop\MikeLegal\iris-new\src\Pages\layout\sidebar\Sider.tsx` (2/5/2026, 12:13:00 PM - 12:13:26 PM)**:
    *   **Initial state**: Uses `useDispatch` and `useSelector`.
    *   **Change**: `useDispatch` and `useSelector` were updated to `useAppDispatch()` and `useAppSelector()` in three commits. The sidebar component manages navigation, state of collapsed/expanded menu, and logout functionality.

*   **`c:\Users\91965\Desktop\MikeLegal\iris-new\src\Pages\Manageprofile\Manageprofile.tsx` (2/5/2026, 12:13:33 PM - 12:13:54 PM)**:
    *   **Initial state**: Uses `useDispatch` and `useSelector`.
    *   **Change**: `useDispatch` and `useSelector` were updated to `useAppDispatch()` and `useAppSelector()` across three commits. This component manages user profiles, allowing adding/deleting marks via text or Excel upload for various product and subscription types, including an OTP validation flow for delete operations.

*   **`c:\Users\91965\Desktop\MikeLegal\iris-new\src\Pages\Register\Registration.tsx` (2/5/2026, 12:32:14 PM - 12:32:28 PM)**:
    *   **Initial state**: Uses `useDispatch` and `useSelector`.
    *   **Change**: `useDispatch` and `useSelector` were updated to `useAppDispatch()` and `useAppSelector()` in three commits. This component provides a user registration form with email, password, and superuser request options, including password validation.

*   **`c:\Users\91965\Desktop\MikeLegal\iris-new\src\Pages\Stats\Stats.tsx` (2/5/2026, 12:32:39 PM - 12:32:55 PM)**:
    *   **Initial state**: Uses `useDispatch` and `useSelector`.
    *   **Change**: `useDispatch` and `useSelector` were updated to `useAppDispatch()` and `useAppSelector()` in three commits. This component displays various application statistics (refresh data, general stats, system updates, actions required, active users) using Ant Design `Statistic` and `Descriptions` components, with a modal for trademark refresh settings.

*   **`c:\Users\91965\Desktop\MikeLegal\iris-new\src\Pages\Stats\TrademarkRefresh\TrademarkRefreshSettings.tsx` (2/5/2026, 12:34:34 PM - 12:34:44 PM)**:
    *   **Initial state**: Uses `useADispatch` (likely a typo, intended `useAppDispatch`) and `useSelector`.
    *   **Change**: The `dispatch` hook was changed from `useADispatch()` to `useAppDispatch()`, and `useSelector` was updated to `useAppSelector()`. This modal allows viewing and updating trademark refresh settings, including various priority numbers and phone number configurations.

*   **`c:\Users\91965\Desktop\MikeLegal\iris-new\src\Pages\Watch\Watch.tsx` (2/5/2026, 12:34:52 PM - 12:35:03 PM)**:
    *   **Initial state**: Uses `useDispatch` and `useSelector`.
    *   **Change**: Both `useDispatch` and `useSelector` were replaced with their `useApp` counterparts. This component provides watch-related functionalities, including downloading marks, viewing latest journals, and performing actions like scanning, refreshing, or verifying journals.

*   **`c:\Users\91965\Desktop\MikeLegal\iris-new\src\Pages\Watchautomation\QueueReportModal.tsx` (2/5/2026, 12:35:10 PM - 12:35:21 PM)**:
    *   **Initial state**: Uses `useDispatch` and `useSelector`.
    *   **Change**: `useDispatch` and `useSelector` were updated to `useAppDispatch()` and `useAppSelector()`. This modal allows users to queue various types of watch reports by selecting profiles, journal numbers, or date ranges based on the product type.

*   **`c:\Users\91965\Desktop\MikeLegal\iris-new\src\Pages\Watchautomation\Watchautomation.tsx` (2/5/2026, 12:35:28 PM - 12:35:47 PM)**:
    *   **Initial state**: Uses `useDispatch` and `useSelector`.
    *   **Change**: `useDispatch` and `useSelector` were updated to `useAppDispatch()` and `useAppSelector()`. This component displays various watch automation reports in a tabbed interface (TM Applied, TM Protect, Image Label, Image Text, Image Similarity, TM Protect New, Market Place) and includes filtering options and a modal for queuing reports.

*   **`c:\Users\91965\Desktop\MikeLegal\iris-new\src\Pages\Whatsnew\Whatsnew.tsx` (2/5/2026, 12:35:57 PM - 12:36:12 PM)**:
    *   **Initial state**: Uses `useDispatch` and `useSelector`.
    *   **Change**: `useDispatch` and `useSelector` were updated to `useAppDispatch()` and `useAppSelector()`. This component allows administrators to post "What's New" updates with titles, dates, content, and images, and manage alert messages for different sources.

*   **`c:\Users\91965\Desktop\MikeLegal\iris-new\src\index.tsx` (2/5/2026, 1:05:13 PM)**:
    *   **Change**: Updated from `ReactDOM.render` to `createRoot(rootElement!).render` for React 18 compatibility. This is a significant infrastructure change, moving to the new root API.

*   **`c:\Users\91965\Desktop\MikeLegal\iris-new\src\Pages\CustomReports\CustomReports.tsx` (2/5/2026, 1:24:45 PM - 1:25:08 PM)**:
    *   **Initial state**: Uses `useDispatch` and `useSelector`.
    *   **Change**: `useDispatch` and `useSelector` were updated to `useAppDispatch()` and `useAppSelector()`. This component displays custom reports in a table, categorized by product type (Manager, Watch, Search), and allows requeuing reports.

*   **`c:\Users\91965\Desktop\MikeLegal\iris-new\src\Pages\OpponentNumbers\OpponentNumbers.tsx` (2/5/2026, 1:25:17 PM - 1:25:30 PM)**:
    *   **Initial state**: Uses `useADispatch` (likely typo) and `useSelector`.
    *   **Change**: The `dispatch` hook was changed from `useADispatch()` to `useAppDispatch()`, and `useSelector` was updated to `useAppSelector()` in three commits. This component displays opponent numbers for documents and notices in a tabbed table, allowing verification.

*   **`c:\Users\91965\Desktop\MikeLegal\iris-new\src\Pages\OpponentNumbers\VerificationModal.tsx` (2/5/2026, 1:25:44 PM - 1:25:50 PM)**:
    *   **Initial state**: Uses `useDispatch` and `useSelector`.
    *   **Change**: Both `useDispatch` and `useSelector` were updated to `useAppDispatch()` and `useAppSelector()`. This modal facilitates verifying opponent numbers for a given application, with search and autocomplete functionalities.

*   **`c:\Users\91965\Desktop\MikeLegal\iris-new\src\Pages\Patent\Patent.tsx` (2/5/2026, 1:26:04 PM - 1:26:12 PM)**:
    *   **Initial state**: Uses `useDispatch` and `useSelector`.
    *   **Change**: `useDispatch` and `useSelector` were updated to `useAppDispatch()` and `useAppSelector()`. This component displays a table of patent reports and provides functionality to requeue them.

*   **`c:\Users\91965\Desktop\MikeLegal\iris-new\src\Pages\Portfolio\Manager\ManagerPortfolio.tsx` (2/5/2026, 1:26:21 PM - 1:26:34 PM)**:
    *   **Initial state**: Uses `useDispatch` and `useSelector`.
    *   **Change**: Both `useDispatch` and `useSelector` were updated to `useAppDispatch()` and `useAppSelector()` in three commits. This component allows users to download marks by selecting a profile and subscription type.

*   **`c:\Users\91965\Desktop\MikeLegal\iris-new\src\Pages\Portfolio\Patent\PatentPortfolio.tsx` (2/5/2026, 1:26:40 PM - 1:26:58 PM)**:
    *   **Initial state**: Uses `useDispatch` and `useSelector`.
    *   **Change**: Both `useDispatch` and `useSelector` were updated to `useAppDispatch()` and `useAppSelector()` in three commits. This component provides functionality to download patent marks based on selected profile and subscription.

*   **`c:\Users\91965\Desktop\MikeLegal\iris-new\src\Pages\Portfolio\Watch\Watch.tsx` (2/5/2026, 1:27:05 PM - 1:27:21 PM)**:
    *   **Initial state**: Uses `useADispatch` (likely typo) and `useSelector`.
    *   **Change**: The `dispatch` hook was changed from `useADispatch()` to `useAppDispatch()`, and `useSelector` was updated to `useAppSelector()` in three commits. This component handles watch profiles, latest journals, and allows users to perform actions like scanning, refreshing, and verifying journals.

*   **`c:\Users\91965\Desktop\MikeLegal\iris-new\src\Pages\Search\Search.tsx` (2/5/2026, 1:27:29 PM - 1:28:37 PM)**:
    *   **Initial state**: Uses `useDispatch` and `useSelector`.
    *   **Change**: Both `useDispatch` and `useSelector` were updated to `useAppDispatch()` and `useAppSelector()` in three commits. This component displays various search-related reports (file, search term, proprietors) in a tabbed table and allows requeuing them.

*   **`c:\Users\91965\Desktop\MikeLegal\iris-new\src\Pages\Portfolio\Watch\WatchPortfolio.tsx` (2/5/2026, 1:28:45 PM - 1:29:00 PM)**:
    *   **Initial state**: Uses `useADispatch` (likely typo) and `useSelector`.
    *   **Change**: The `dispatch` hook was changed from `useADispatch()` to `useAppDispatch()`, and `useSelector` was updated to `useAppSelector()` in two commits. This component allows downloading watch marks based on selected profile and subscription type.

### Timestamps of Significant Changes:

*   **2/5/2026, 1:05:13 PM**: The `index.tsx` file was updated to use `createRoot` for React 18, indicating a project-wide React version upgrade. This is a singular, notable infrastructure change.
*   **Multiple, closely spaced timestamps on 2/5/2026**: Most files exhibit changes occurring within seconds or a minute of each other, all around the times 12:03 PM - 12:13 PM and 1:24 PM - 1:36 PM. This suggests automated or highly systematic refactoring.

### Patterns or Recurring Elements:

1.  **Redux Hook Refactoring**: The most prominent pattern is the systematic replacement of `useDispatch()` with `useAppDispatch()` and `useSelector()` with `useAppSelector()` across almost all modified React components. This indicates an adherence to Redux Toolkit's recommended pattern for dispatching actions and selecting state, typically achieved by creating custom typed hooks.
2.  **`useAppDispatch` and `useAppSelector`**: The consistent use of these custom hooks implies that the project has defined types for its Redux store (`RootState`) and dispatch function (`AppDispatch`), enhancing type safety throughout the application.
3.  **Ant Design Components**: All components extensively use Ant Design UI library elements (e.g., `Form`, `Input`, `Button`, `Select`, `Table`, `Modal`, `Spin`, `Tabs`, `Descriptions`, `Statistic`, `Popconfirm`, `Tooltip`, `Checkbox`).
4.  **Styled Components**: Many components use `styled-components` for styling, with consistent naming conventions like `ComponentNameContainer`, `ComponentNameWrapper`, `ComponentNameStyles`.
5.  **Data Fetching with Redux**: `useEffect` hooks are commonly used to dispatch actions (`dispatch(getData({}))`) to fetch initial data for components, and `useAppSelector` is used to access loading states (`isLoading`, `loading`), data (`data`, `reportdata`, `users`), and error states (`isError`, `messages`, `errors`) from the Redux store.
6.  **Form Handling**: Ant Design's `Form` component is widely used for user input, with `onFinish` handlers dispatching actions to the Redux store.
7.  **Error and Success Handling**: `toast.warn` or `message.error` from `antd` and `react-toastify` are frequently used for user feedback on validation errors or API call failures.
8.  **Modal Usage**: Modals (`Modal`) are consistently employed for specific functionalities like file uploads, adding rows, or configuring settings, improving user experience by keeping context.
9.  **Navigation**: `useNavigate` from `react-router-dom` is used for programmatic navigation, often after login or successful operations.
10. **Local Storage Interaction**: The `Sider.tsx` component interacts with `window.localStorage` to persist sidebar collapse state and selected menu items, suggesting a preference for client-side state persistence for UI elements.
11. **React 18 Upgrade**: The single change in `index.tsx` to `createRoot` indicates a recent upgrade of the React library, a fundamental shift that impacts how the application is rendered.